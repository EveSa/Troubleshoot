---
layout: post
---
# Bonnes Pratiques Python

Suivre les recommandations de la PEP8 (Python Enhancement Proposal) √©crite par Guido Van Rossum

## Ressources

https://docs.python-guide.org/writing/style/

https://docs.python-guide.org/writing/structure/

https://www.python.org/dev/peps/pep-0008/#prescriptive-naming-conventions

https://github.com/zedr/clean-code-python

https://github.com/davified/clean-code-ml

https://realpython.com/python-pep8/

## Linter

Black

```bash
pip install black
black file_name.py
```

autoPEP8

```bash
pip install autopep8
autopep8 --select E201,E202,E203,E222,E225,E231,E251,E293,E302,E303,W391,W293,W291,W293 --in-place file.py
```

# Utilisation des GPU

Avec les Dockers, les ressources machines sont partag√©es. On doit donc faire particuli√®rement attention √† monitorer son exploitation pour ne pas emb√™ter les autres personnes pouvant travailler sur le m√™me machine.

Pour avoir l‚Äôutilisation des GPU et ses process sur GPU:

```bash
nvidia-smi
```

Pour supprimer le cache des GPU

```bash
import torch
torch.cuda.empty_cache()
```

Bien v√©rifier que tous les process lanc√©s qui utilisent cuda ont √©t√© arr√™t√©s (relancer les kernel, exit() les terminaux python, ‚Ä¶)

Pour limiter l‚Äôutilisation des GPU

```bash
CUDA_VISIBLE_DEVICES=0,2 python pytorch_script.py
```

# Organiser son code

ressource : [les conseils du MIT](https://mitcommlab.mit.edu/broad/commkit/file-structure/#BestPracticesFileStructures)

Respecter une arborescence fixe

```bash
PROJECT/
‚îú‚îÄ‚îÄ bin/            <- compiled binaries. 
‚îú‚îÄ‚îÄ data/ 
‚îÇ   ‚îú‚îÄ‚îÄ raw/
‚îÇ   ‚îî‚îÄ‚îÄ clean/
‚îÇ
‚îú‚îÄ‚îÄ figures/        <- figures used in place of a "results" folder. 
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ process/    <- scripts to maniuplate data between raw, cleaned, final stages.
‚îÇ   ‚îî‚îÄ‚îÄ plot/	      <- intermediate plotting.
‚îÇ
‚îú‚îÄ‚îÄ src
‚îÇ   ‚îú‚îÄ‚îÄ model1/     <- various experimental models.
‚îÇ   ‚îú‚îÄ‚îÄ model2/
‚îÇ   ‚îî‚îÄ‚îÄ model3/
‚îÇ
‚îú‚îÄ‚îÄ LICENSE
‚îú‚îÄ‚îÄ Makefile
‚îî‚îÄ‚îÄ readme.md
```

Les conseils d‚ÄôEDF

```bash
.
‚îú‚îÄ‚îÄ documentation   // pour les notes, ppt, ...
‚îú‚îÄ‚îÄ notebooks       // pour explo et prez
‚îú‚îÄ‚îÄ references      // papiers scientifiques
‚îú‚îÄ‚îÄ data            // contient les donn√©es
‚îÇ   ‚îú‚îÄ‚îÄ input
‚îÇ   ‚îú‚îÄ‚îÄ preprocessed
‚îÇ   ‚îú‚îÄ‚îÄ feature_engineering
‚îÇ   ‚îú‚îÄ‚îÄ figures                 // pour les graphes
‚îÇ   ‚îî‚îÄ‚îÄ target
‚îî‚îÄ‚îÄ src             // scripts processings
    ‚îú‚îÄ‚îÄ input
    ‚îú‚îÄ‚îÄ preprocessed
    ‚îú‚îÄ‚îÄ feature_engineering
    ‚îú‚îÄ‚îÄ figures
    ‚îú‚îÄ‚îÄ target
    ‚îî‚îÄ‚îÄ utils                   // dossier additionnel
```

# Break, continue et pass

# Les d√©corateurs

# Installation des paquets

<aside>
‚ùó Bien regarder la version de python requise pour le bon fonctionnement du paquet

</aside>

Les paquets install√©s peuvent rentrer en conflits les uns avec les autres surtout quand ils portent sur une m√™me th√©matique

# üí° √âvaluation

1. Cr√©ez l‚Äôarborescence d‚Äôun projet de pr√©diction de la m√©t√©o √† partir de relev√© m√©t√©orologique sur les 15 derni√®res ann√©es

# Utilisation de `assert` et `__debug__`

Tr√®s bonne pratique pour tester du code mais a ne pas utiliser en production

Assert et debug ne doivent pas √™tre utilis√©s pour :

- Processing and validating data
- Handling errors
- Running operations with side effects